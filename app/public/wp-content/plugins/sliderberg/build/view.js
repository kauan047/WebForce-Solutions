(()=>{"use strict";class t{activeTimeouts=new Set;constructor(t,e,s){this.config=t,this.state=e,this.elements=s}safeSetTimeout(t,e){const s=window.setTimeout((()=>{this.activeTimeouts.delete(s),this.state.destroyed||t()}),e);return this.activeTimeouts.add(s),s}cleanup(){this.activeTimeouts.forEach((t=>clearTimeout(t))),this.activeTimeouts.clear()}setupSliderLayout(){const{container:t,slides:e}=this.elements,{transitionEffect:s,isCarouselMode:i,infiniteLoop:n}=this.config,o=this.getResponsiveSettings(),{slidesToShow:a,slideSpacing:r}=o;if("slide"===s&&i&&a>1&&n){Array.from(t.querySelectorAll(".sliderberg-clone")).forEach((t=>t.remove()));for(let s=e.length-a;s<e.length;s++){const i=e[s].cloneNode(!0);i.classList.add("sliderberg-clone"),t.insertBefore(i,t.firstChild)}for(let s=0;s<a;s++){const i=e[s].cloneNode(!0);i.classList.add("sliderberg-clone"),t.appendChild(i)}t.style.display="flex",t.style.transition=`transform ${this.getTransitionString()}`,t.style.gap=`${r}px`,Array.from(t.children).forEach((t=>{t.style.flex=`0 0 calc((100% - ${(a-1)*r}px) / ${a})`,t.style.width=`calc((100% - ${(a-1)*r}px) / ${a})`,t.style.minWidth=`calc((100% - ${(a-1)*r}px) / ${a})`})),t.style.transform=`translateX(-${a*(100/a)}%)`,this.state.startIndex=0}else"slide"===s&&i&&a>1?(t.style.display="flex",t.style.transition=`transform ${this.getTransitionString()}`,t.style.transform="translateX(0)",t.style.gap=`${r}px`,e.forEach((t=>{t.style.flex=`0 0 calc((100% - ${(a-1)*r}px) / ${a})`,t.style.width=`calc((100% - ${(a-1)*r}px) / ${a})`,t.style.minWidth=`calc((100% - ${(a-1)*r}px) / ${a})`}))):"slide"===s?(t.style.display="flex",t.style.transition=`transform ${this.getTransitionString()}`,t.style.transform="translateX(0)",e.forEach((t=>{t.style.flex="0 0 100%",t.style.width="100%",t.style.minWidth="100%"})),e.length>1&&this.setupCloneSlides()):"fade"!==s&&"zoom"!==s||this.setupFadeOrZoomLayout()}handleSlideTransition(t,e){const{transitionEffect:s,isCarouselMode:i,infiniteLoop:n}=this.config,{slidesToShow:o,slidesToScroll:a}=this.getResponsiveSettings(),{container:r}=this.elements,l=this.elements.slides.length;let d=t;if("slide"===s&&i&&o>1&&n){const t=l,e=(Array.from(r.children),o),s=d+e;r.style.transition=`transform ${this.getTransitionString()}`,r.style.transform=`translateX(-${s*(100/o)}%)`,this.state.startIndex=d;const i=()=>{r.removeEventListener("transitionend",i),d<0?(this.state.startIndex=t-o,r.style.transition="none",r.style.transform=`translateX(-${(this.state.startIndex+e)*(100/o)}%)`,r.offsetHeight,r.style.transition=`transform ${this.getTransitionString()}`):d>=t&&(this.state.startIndex=0,r.style.transition="none",r.style.transform=`translateX(-${e*(100/o)}%)`,r.offsetHeight,r.style.transition=`transform ${this.getTransitionString()}`),this.state.isAnimating=!1};r.addEventListener("transitionend",i)}else if("slide"===s&&i&&o>1){const e=l;d=Math.max(0,Math.min(t,e-o)),this.state.startIndex=d,r.style.transition=`transform ${this.getTransitionString()}`,r.style.transform=`translateX(-${d*(100/o)}%)`,this.state.isAnimating=!1}else"slide"===s?null===e?(this.state.currentSlide=t+1,r.style.transition=`transform ${this.getTransitionString()}`,r.style.transform=`translateX(-${100*this.state.currentSlide}%)`,this.scheduleAnimationReset()):"next"===e?this.handleNextSlideTransition():"prev"===e&&this.handlePrevSlideTransition():"fade"!==s&&"zoom"!==s||this.handleFadeOrZoomTransition(t,e,this.getVisibleSlideIndex())}handleNextSlideTransition(){const{container:t,slides:e}=this.elements,{transitionDuration:s}=this.config;this.state.currentSlide++,t.style.transition=`transform ${this.getTransitionString()}`,t.style.transform=`translateX(-${100*this.state.currentSlide}%)`,this.state.currentSlide===e.length+1?this.safeSetTimeout((()=>{t.style.transition="none",this.state.currentSlide=1,t.style.transform=`translateX(-${100*this.state.currentSlide}%)`,t.offsetHeight,this.safeSetTimeout((()=>{t.style.transition=`transform ${this.getTransitionString()}`,this.state.isAnimating=!1}),10)}),s):this.scheduleAnimationReset()}handlePrevSlideTransition(){const{container:t,slides:e}=this.elements,{transitionDuration:s}=this.config;this.state.currentSlide--,t.style.transition=`transform ${this.getTransitionString()}`,t.style.transform=`translateX(-${100*this.state.currentSlide}%)`,0===this.state.currentSlide?this.safeSetTimeout((()=>{t.style.transition="none",this.state.currentSlide=e.length,t.style.transform=`translateX(-${100*this.state.currentSlide}%)`,t.offsetHeight,this.safeSetTimeout((()=>{t.style.transition=`transform ${this.getTransitionString()}`,this.state.isAnimating=!1}),10)}),s):this.scheduleAnimationReset()}handleFadeOrZoomTransition(t,e,s){const{slides:i}=this.elements,{transitionEffect:n}=this.config;this.state.currentSlide=t;const o=i[this.state.currentSlide],a=i[s];o&&a?(a.style.zIndex="0",o.style.zIndex="1",a.style.transition=`opacity ${this.getTransitionString()}, transform ${this.getTransitionString()}`,o.style.transition=`opacity ${this.getTransitionString()}, transform ${this.getTransitionString()}`,a.style.opacity="0","zoom"===n&&(a.style.transform="next"===e?"scale(0.95)":"scale(1.05)"),o.style.opacity="0","zoom"===n&&(o.style.transform="next"===e?"scale(1.05)":"scale(0.95)"),o.offsetHeight,o.style.opacity="1","zoom"===n&&(o.style.transform="scale(1)"),this.updateContainerHeight(),this.scheduleAnimationReset()):this.state.isAnimating=!1}updateContainerHeight(){const{container:t,slides:e}=this.elements,{transitionEffect:s}=this.config;if("fade"!==s&&"zoom"!==s)return;const i=e[this.getVisibleSlideIndex()];if(!i)return;const n=i.offsetHeight;if(n>0)t.style.height=`${n}px`;else{const e=getComputedStyle(i).minHeight;t.style.height=e&&"0px"!==e?e:"400px"}}setupCloneSlides(){const{container:t,slides:e}=this.elements;if(e.length<=1)return;const s=e[0].cloneNode(!0),i=e[e.length-1].cloneNode(!0);s.setAttribute("aria-hidden","true"),i.setAttribute("aria-hidden","true"),s.classList.add("sliderberg-clone"),i.classList.add("sliderberg-clone"),s.setAttribute("data-clone-of","0"),i.setAttribute("data-clone-of",(e.length-1).toString()),t.appendChild(s),t.insertBefore(i,e[0]),t.style.transform="translateX(-100%)",this.state.currentSlide=1}setupFadeOrZoomLayout(){const{container:t,slides:e}=this.elements,{transitionEffect:s}=this.config;t.style.display="block",t.style.position="relative",t.style.transition="none",e[0]&&this.updateContainerHeight(),e.forEach(((t,e)=>{t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.opacity=0===e?"1":"0",t.style.transition=`opacity ${this.getTransitionString()}, transform ${this.getTransitionString()}`,t.style.zIndex=0===e?"1":"0","zoom"===s&&(t.style.transform=0===e?"scale(1)":"scale(0.95)"),t.setAttribute("aria-hidden",0===e?"false":"true"),t.style.visibility="visible",t.style.display="block"}))}scheduleAnimationReset(){this.safeSetTimeout((()=>{this.state.isAnimating=!1}),this.config.transitionDuration+50)}getTransitionString(){const{transitionDuration:t,transitionEasing:e}=this.config;return`${t}ms ${e}`}getResponsiveSettings(){const{config:t}=this,e=window.innerWidth;return e<768?{slidesToShow:t.mobileSlidesToShow,slidesToScroll:t.mobileSlidesToScroll,slideSpacing:t.mobileSlideSpacing}:e>=768&&e<1024?{slidesToShow:t.tabletSlidesToShow,slidesToScroll:t.tabletSlidesToScroll,slideSpacing:t.tabletSlideSpacing}:{slidesToShow:t.slidesToShow,slidesToScroll:t.slidesToScroll,slideSpacing:t.slideSpacing}}getVisibleSlideIndex(){const{transitionEffect:t}=this.config,e=this.elements.slides.length;return"slide"===t&&e>1?0===this.state.currentSlide?e-1:this.state.currentSlide===e+1?0:this.state.currentSlide-1:this.state.currentSlide}}class e{constructor(t,e,s,i){this.config=t,this.state=e,this.elements=s,this.onSlideChange=i.onSlideChange,this.onNextSlide=i.onNextSlide,this.onPrevSlide=i.onPrevSlide,this.onResize=i.onResize,this.initializeBoundHandlers()}initializeBoundHandlers(){this.boundHandleTouchStart=this.handleTouchStart.bind(this),this.boundHandleTouchMove=this.handleTouchMove.bind(this),this.boundHandleTouchEnd=this.handleTouchEnd.bind(this),this.boundHandleKeyboard=this.handleKeyboard.bind(this),this.boundStopAutoplay=this.stopAutoplay.bind(this),this.boundStartAutoplay=this.startAutoplay.bind(this),this.boundHandleResize=this.handleResize.bind(this),this.boundHandleFocusIn=this.handleFocusIn.bind(this),this.boundHandleFocusOut=this.handleFocusOut.bind(this)}attachEventListeners(){this.attachNavigationListeners(),this.attachTouchListeners(),this.attachKeyboardListeners(),this.attachFocusListenersForAutoplay()}attachNavigationListeners(){const{prevButton:t,nextButton:e}=this.elements;t&&t.addEventListener("click",this.onPrevSlide),e&&e.addEventListener("click",this.onNextSlide)}attachTouchListeners(){const{container:t}=this.elements;t.addEventListener("touchstart",this.boundHandleTouchStart,{passive:!0}),t.addEventListener("touchmove",this.boundHandleTouchMove,{passive:!0}),t.addEventListener("touchend",this.boundHandleTouchEnd,{passive:!0})}attachKeyboardListeners(){this.elements.wrapper.addEventListener("keydown",this.boundHandleKeyboard)}attachFocusListenersForAutoplay(){this.elements.wrapper.addEventListener("focusin",this.boundHandleFocusIn),this.elements.wrapper.addEventListener("focusout",this.boundHandleFocusOut)}handleTouchStart(t){this.state.isAnimating||this.state.destroyed||0!==t.touches.length&&(this.state.touchStartX=t.touches[0].clientX,this.state.touchStartY=t.touches[0].clientY)}handleTouchMove(t){}handleTouchEnd(t){if(this.state.isAnimating||this.state.destroyed)return;if(0===t.changedTouches.length)return;if(this.elements.slides.length<=1)return;const e=t.changedTouches[0].clientX,s=t.changedTouches[0].clientY,i=this.state.touchStartX-e,n=this.state.touchStartY-s;Math.abs(i)>Math.abs(n)&&Math.abs(i)>this.state.swipeThreshold&&(i>0?this.onNextSlide():this.onPrevSlide())}handleKeyboard(t){if(this.state.destroyed)return;const e=t,s=(this.elements.wrapper.ownerDocument||document).activeElement;if(this.elements.wrapper.contains(s)&&!(this.elements.slides.length<=1))switch(e.key){case"ArrowLeft":this.onPrevSlide(),t.preventDefault();break;case"ArrowRight":this.onNextSlide(),t.preventDefault()}}handleFocusIn(){this.config.pauseOnHover&&this.stopAutoplay()}handleFocusOut(t){this.config.pauseOnHover&&!this.elements.wrapper.contains(t.relatedTarget)&&this.startAutoplay()}handleResize(){if(!this.state.destroyed&&(this.onResize&&this.onResize(),"slide"===this.config.transitionEffect&&!this.config.isCarouselMode)){const{container:t}=this.elements,e=t.style.transition;t.style.transition="none",t.style.transform=`translateX(-${100*this.state.currentSlide}%)`,t.offsetHeight,t.style.transition=e}}setupAutoplay(){if(this.config.autoplay&&!(this.elements.slides.length<=1)&&(this.startAutoplay(),this.config.pauseOnHover)){const{container:t}=this.elements;t.addEventListener("mouseenter",this.boundStopAutoplay),t.addEventListener("mouseleave",this.boundStartAutoplay),t.addEventListener("touchstart",this.boundStopAutoplay,{passive:!0}),t.addEventListener("touchend",this.boundStartAutoplay,{passive:!0})}}startAutoplay(){!this.config.autoplay||this.state.autoplayInterval||this.state.destroyed||this.elements.slides.length<=1||(this.state.autoplayInterval=window.setInterval((()=>{this.state.isAnimating||this.state.destroyed||this.onNextSlide()}),this.config.autoplaySpeed))}stopAutoplay(){this.state.autoplayInterval&&(clearInterval(this.state.autoplayInterval),this.state.autoplayInterval=null)}setupObservers(t){"ResizeObserver"in window&&(this.state.observer=new ResizeObserver(this.boundHandleResize),this.state.observer.observe(this.elements.wrapper),"fade"!==this.config.transitionEffect&&"zoom"!==this.config.transitionEffect||this.elements.slides.forEach((t=>this.state.observer?.observe(t)))),"IntersectionObserver"in window&&(this.state.intersectionObserver=new IntersectionObserver(t,{threshold:.1}),this.state.intersectionObserver.observe(this.elements.wrapper))}cleanup(){this.stopAutoplay(),this.cleanupObservers(),this.cleanupEventListeners(),this.cleanupReferences()}cleanupObservers(){if(this.state.observer){try{this.state.observer.disconnect()}catch(t){console.warn("Observer cleanup error:",t)}this.state.observer=null}if(this.state.intersectionObserver){try{this.state.intersectionObserver.disconnect()}catch(t){console.warn("Intersection observer cleanup error:",t)}this.state.intersectionObserver=null}}cleanupEventListeners(){const{container:t,prevButton:e,nextButton:s,wrapper:i,indicators:n}=this.elements;t&&t.parentNode&&(t.removeEventListener("touchstart",this.boundHandleTouchStart),t.removeEventListener("touchmove",this.boundHandleTouchMove),t.removeEventListener("touchend",this.boundHandleTouchEnd),this.config.pauseOnHover&&(t.removeEventListener("mouseenter",this.boundStopAutoplay),t.removeEventListener("mouseleave",this.boundStartAutoplay),t.removeEventListener("touchstart",this.boundStopAutoplay),t.removeEventListener("touchend",this.boundStartAutoplay))),e&&e.parentNode&&e.removeEventListener("click",this.onPrevSlide),s&&s.parentNode&&s.removeEventListener("click",this.onNextSlide),i&&i.parentNode&&(i.removeEventListener("keydown",this.boundHandleKeyboard),i.removeEventListener("focusin",this.boundHandleFocusIn),i.removeEventListener("focusout",this.boundHandleFocusOut)),n&&(n.innerHTML="")}cleanupReferences(){this.boundHandleTouchStart=null,this.boundHandleTouchMove=null,this.boundHandleTouchEnd=null,this.boundHandleKeyboard=null,this.boundStopAutoplay=null,this.boundStartAutoplay=null,this.boundHandleResize=null,this.boundHandleFocusIn=null,this.boundHandleFocusOut=null,this.onSlideChange=null,this.onNextSlide=null,this.onPrevSlide=null,this.onResize=null}getBoundHandlers(){return{handleResize:this.boundHandleResize,startAutoplay:this.boundStartAutoplay,stopAutoplay:this.boundStopAutoplay}}}function s(t,e,s,i){return"number"!=typeof t||isNaN(t)?i:Math.min(Math.max(t,e),s)}class i{static instances=new Map;static createInstance(t){try{let e;if(void 0!==window.crypto&&window.crypto.getRandomValues){const t=new Uint32Array(2);window.crypto.getRandomValues(t),e=`slider-${t[0].toString(36)}${t[1].toString(36)}`}else e=`slider-${Date.now().toString(36)}-${Math.random().toString(36).substring(2,11)}`;e=function(t){const e=t.replace(/[^a-zA-Z0-9\-_]/g,"");return/^[a-zA-Z]/.test(e)?e:"slide_"+e}(e);const s=new i(t,e);return i.instances.set(e,s),s}catch(t){return console.error("Failed to initialize SliderBerg slider:",t),null}}static destroyAll(){i.instances.forEach((t=>{t.destroy()})),i.instances.clear()}static getInstances(){return i.instances}constructor(t,e){this.id=e;let s=t.querySelector(".sliderberg-slides-container");if(s){const t=s.querySelector(".sliderberg-slides-container");t&&(s=t,s.style.display="flex",s.style.width="100%")}if(!s)throw new Error("Slider container not found");const i=Array.from(s.children).filter((t=>t.classList.contains("sliderberg-slide")||t.classList.contains("wp-block-sliderberg-slide")));if(!i.length)throw new Error("No slides found in slider");const n=t.querySelector(".sliderberg-slides-container")?t:t.parentElement,o=n?.querySelector(".sliderberg-prev:not(.sliderberg-slides-container .sliderberg-prev)"),a=n?.querySelector(".sliderberg-next:not(.sliderberg-slides-container .sliderberg-next)"),r=n?.querySelector(".sliderberg-slide-indicators:not(.sliderberg-slides-container .sliderberg-slide-indicators)");o&&a||console.warn(`Navigation elements not found for slider ${this.id}, navigation will be disabled`),this.elements={container:s,slides:i,prevButton:o,nextButton:a,indicators:r,wrapper:t},this.config=this.parseConfig(s),this.state={startIndex:0,currentSlide:0,isAnimating:!1,autoplayInterval:null,slideCount:i.length,touchStartX:0,touchStartY:0,swipeThreshold:50,observer:null,intersectionObserver:null,destroyed:!1},this.initializeHandlers(),this.initialize()}initializeHandlers(){this.animationHandler=new t(this.config,this.state,this.elements),this.eventHandler=new e(this.config,this.state,this.elements,{onSlideChange:this.dispatchSlideChangeEvent.bind(this),onNextSlide:this.nextSlide.bind(this),onPrevSlide:this.prevSlide.bind(this),onResize:this.handleResize.bind(this)}),this.boundHandleIntersection=this.handleIntersection.bind(this)}parseConfig(t){const e=this.parseBooleanAttribute(t,"data-is-carousel",!1),i=this.parseAttribute(t,"data-transition-effect","slide");return{transitionEffect:e?"slide":(n=i,(window.sliderbergData&&window.sliderbergData.validTransitionEffects?window.sliderbergData.validTransitionEffects:["slide","fade","zoom"]).includes(n)?n:"slide"),transitionDuration:s(this.parseNumberAttribute(t,"data-transition-duration",500),200,2e3,500),transitionEasing:(o=this.parseAttribute(t,"data-transition-easing","ease"),["ease","ease-in","ease-out","ease-in-out","linear"].includes(o)?o:"ease"),autoplay:this.parseBooleanAttribute(t,"data-autoplay",!1),autoplaySpeed:s(this.parseNumberAttribute(t,"data-autoplay-speed",5e3),1e3,1e4,5e3),pauseOnHover:this.parseBooleanAttribute(t,"data-pause-on-hover",!0),isCarouselMode:e,slidesToShow:this.parseNumberAttribute(t,"data-slides-to-show",1),slidesToScroll:this.parseNumberAttribute(t,"data-slides-to-scroll",1),slideSpacing:this.parseNumberAttribute(t,"data-slide-spacing",0),infiniteLoop:this.parseBooleanAttribute(t,"data-infinite-loop",!1),tabletSlidesToShow:this.parseNumberAttribute(t,"data-tablet-slides-to-show",2),tabletSlidesToScroll:this.parseNumberAttribute(t,"data-tablet-slides-to-scroll",1),tabletSlideSpacing:this.parseNumberAttribute(t,"data-tablet-slide-spacing",15),mobileSlidesToShow:this.parseNumberAttribute(t,"data-mobile-slides-to-show",1),mobileSlidesToScroll:this.parseNumberAttribute(t,"data-mobile-slides-to-scroll",1),mobileSlideSpacing:this.parseNumberAttribute(t,"data-mobile-slide-spacing",10)};var n,o}initialize(){this.elements.slides.forEach((t=>{t.style.display=""})),this.animationHandler.setupSliderLayout(),this.createIndicators(),this.eventHandler.attachEventListeners(),this.eventHandler.setupAutoplay(),this.eventHandler.setupObservers(this.boundHandleIntersection),this.updateAriaAttributes(),setTimeout((()=>{!this.state.destroyed&&this.elements.slides.length>1&&this.goToSlide(0,null)}),50)}goToSlide(t,e){if(this.state.isAnimating||this.state.destroyed)return;this.state.isAnimating=!0;const s=this.state.startIndex;this.animationHandler.handleSlideTransition(t,e),this.updateIndicators(),this.updateAriaAttributes();const i=this.config.isCarouselMode?this.state.startIndex:this.state.currentSlide,n=this.config.isCarouselMode?s:this.getVisibleSlideIndex();this.dispatchSlideChangeEvent(n,i)}nextSlide(){if(this.state.isAnimating||this.state.destroyed)return;const{isCarouselMode:t,infiniteLoop:e,transitionEffect:s}=this.config,{slidesToShow:i,slidesToScroll:n}=this.getResponsiveSettings(),o=this.elements.slides.length;if(!(o<=1))if(t||"fade"!==s&&"zoom"!==s){let s=this.state.startIndex+(t?n:1);t&&e||t&&(s=Math.min(s,o-i)),this.goToSlide(s,"next")}else{let t=this.state.currentSlide+1;t>=o&&(t=0),this.goToSlide(t,"next")}}prevSlide(){if(this.state.isAnimating||this.state.destroyed)return;const{isCarouselMode:t,infiniteLoop:e,transitionEffect:s}=this.config,{slidesToShow:i,slidesToScroll:n}=this.getResponsiveSettings(),o=this.elements.slides.length;if(!(o<=1))if(t||"fade"!==s&&"zoom"!==s){let s=this.state.startIndex-(t?n:1);t&&e||t&&(s=Math.max(s,0)),this.goToSlide(s,"prev")}else{let t=this.state.currentSlide-1;t<0&&(t=o-1),this.goToSlide(t,"prev")}}createIndicators(){const{indicators:t}=this.elements,{isCarouselMode:e,infiniteLoop:s}=this.config;if(!t)return;const{slidesToShow:i}=this.getResponsiveSettings(),n=this.elements.slides.length,o=s?n:Math.max(1,n-i+1);t.innerHTML="";for(let e=0;e<o;e++){const s=document.createElement("button");s.className="sliderberg-slide-indicator"+(e===this.state.startIndex?" active":""),s.setAttribute("aria-label",`Go to slide ${e+1}`),s.setAttribute("data-slide-index",e.toString()),s.addEventListener("click",(()=>{this.goToSlide(e,null)})),t.appendChild(s)}}updateIndicators(){const{indicators:t}=this.elements,{isCarouselMode:e,infiniteLoop:s,transitionEffect:i}=this.config;if(!t)return;const n=this.elements.slides.length,o=n;let a;t.innerHTML="",a=e?this.state.startIndex%n:this.getVisibleSlideIndex();for(let e=0;e<o;e++){const s=document.createElement("button");s.className="sliderberg-slide-indicator"+(e===a?" active":""),s.setAttribute("aria-label",`Go to slide ${e+1}`),s.setAttribute("data-slide-index",e.toString()),s.addEventListener("click",(()=>{this.goToSlide(e,null)})),t.appendChild(s)}}updateAriaAttributes(){const{slides:t}=this.elements,e=this.getVisibleSlideIndex();t.forEach(((t,s)=>{const i=s===e;t.setAttribute("aria-hidden",i?"false":"true"),t.setAttribute("tabindex",i?"0":"-1")}))}getVisibleSlideIndex(){const{transitionEffect:t}=this.config,e=this.elements.slides.length;return"slide"===t&&e>1?0===this.state.currentSlide?e-1:this.state.currentSlide===e+1?0:this.state.currentSlide-1:this.state.currentSlide}handleIntersection(t){t.forEach((t=>{this.state.destroyed||(t.isIntersecting?this.config.autoplay&&this.eventHandler.startAutoplay():this.eventHandler.stopAutoplay())}))}dispatchSlideChangeEvent(t,e){const s=new CustomEvent("sliderberg.slidechange",{bubbles:!0,detail:{sliderId:this.id,from:t,to:e}});this.elements.wrapper.dispatchEvent(s)}destroy(){this.state.destroyed||(this.state.destroyed=!0,this.eventHandler&&this.eventHandler.cleanup(),this.animationHandler&&this.animationHandler.cleanup&&this.animationHandler.cleanup(),i.instances.delete(this.id),this.cleanupReferences(),console.log(`SliderBerg instance ${this.id} destroyed and cleaned.`))}cleanupReferences(){this.elements=null,this.config=null,this.state=null,this.animationHandler=null,this.eventHandler=null,this.boundHandleIntersection=null}getElements(){return this.elements}getResponsiveSettings(){const{config:t}=this,e=window.innerWidth;return e<768?{slidesToShow:t.mobileSlidesToShow,slidesToScroll:t.mobileSlidesToScroll,slideSpacing:t.mobileSlideSpacing}:e>=768&&e<1024?{slidesToShow:t.tabletSlidesToShow,slidesToScroll:t.tabletSlidesToScroll,slideSpacing:t.tabletSlideSpacing}:{slidesToShow:t.slidesToShow,slidesToScroll:t.slidesToScroll,slideSpacing:t.slideSpacing}}parseAttribute(t,e,s){const i=t.getAttribute(e);return null!==i?function(t){return t.replace(/[^\w\s\-_.]/g,"")}(i):s}parseNumberAttribute(t,e,i){return function(t,e,i,n){if(!t)return n;const o=t.replace(/[^0-9.\-]/g,""),a=parseFloat(o);return isNaN(a)||!isFinite(a)?n:s(a,-999999,999999,n)}(t.getAttribute(e),0,0,i)}parseBooleanAttribute(t,e,s){const i=t.getAttribute(e);return null!==i?"true"===i:s}handleResize(){if(!this.state.destroyed){if(this.config.isCarouselMode){this.animationHandler.setupSliderLayout(),this.updateIndicators();const{slidesToShow:t}=this.getResponsiveSettings(),e=Math.max(0,this.elements.slides.length-t);this.state.startIndex>e&&this.goToSlide(e,null)}"fade"!==this.config.transitionEffect&&"zoom"!==this.config.transitionEffect||this.animationHandler.updateContainerHeight()}}}function n(){const t=document.querySelectorAll(".wp-block-sliderberg-sliderberg");if(t.length){if(window.wp?.hooks?.applyFilters){const e=window.wp.hooks.applyFilters("sliderberg.frontendInit",null,t);if(e&&"function"==typeof e)return void e(t)}t.forEach((t=>{let e=!1;if(i.getInstances().forEach((s=>{s.getElements().wrapper===t&&(e=!0)})),!e){let e=!0;window.wp?.hooks?.applyFilters&&(e=window.wp.hooks.applyFilters("sliderberg.beforeSliderInit",!0,t)),e&&i.createInstance(t)}}))}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>setTimeout(n,50))):setTimeout(n,50),window.addEventListener("beforeunload",(()=>{i.destroyAll()})),document.addEventListener("DOMContentLoaded",(function(){"undefined"!=typeof jQuery&&jQuery(document).on("ajaxComplete",(function(t,e,s){(s.data&&"string"==typeof s.data&&s.data.includes("action=load-more")||e.responseText&&e.responseText.includes("wp-block-sliderberg-sliderberg"))&&setTimeout(n,150)})),document.addEventListener("content-updated",(()=>setTimeout(n,150)))})),window.SliderBerg={init:n,destroyAll:i.destroyAll}})();